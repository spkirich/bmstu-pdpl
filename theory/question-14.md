# Команды работы со строками

Архитектура x86 предоставляет специальные команды для работы со строками из
байтов и слов. Все они предполагают, что `<источник>` располагается по адресу
`DS:SI`, `<приёмник>` - по адресу `ES:DI`.

Копирование:

```asm
MOVS <приёмник>, <источник>
```

На основе размера `<приёмника>` и `<источника>` ассемблер подставляет на её
место одну из следующих команд:

```asm
MOVSB
MOVSW
```

Первая копирует из ячейки памяти по адресу `DS:SI` в ячейку по адресу `ES:DI`
байт, вторая - слово. Затем эти команды увеличивают (при сброшенном `DF`) или
уменьшают (при установленном `DF`) `SI` и `DI` на количество скопированных
байт.

Сравнение:

```asm
CMPS <приёмник>, <источник>
```

Распадается на следующие команды:

```asm
CMPSB
CMPSW
```

Они же сравнивают байты или слова по адресам `DS:SI` и `ES:DI` аналогично
`CMP`, а затем изменяют `SI` и `DI`.

Сканирование:

```asm
SCAS <приёмник>
```

Распадается на следующие команды:

```asm
SCASB
SCASW
```

Первая сравнивает байт по адресу `ES:DI` с `AL`, вторая - слово по тому же
адресу с `AX`. Затем обе команды изменяют `DI`.

Загрузка:

```asm
LODS <источник>
```

Распадается на следующие команды:

```asm
LODSB
LODSW
```

Первая загружает байт по адресу `DS:SI` в `AL`, вторая - слово по тому же
адресу в `AX`. Затем обе команды изменяют `SI`.

Сохранение:

```asm
STOS <приёмник>
```

Распадается на следующие команды:

```asm
STOSB
STOSW
```

Первая сохраняет по адресу `ES:DI` `AL`, вторая - `AX`. Затем обе команды
изменяют `DI`.

Любой команде может предшествовать префикс повторения:

```asm
REP <команда>
```

Он повторяет `<команду>` до обнуления счётчика `CX`. Также существуют две его
разновидности, учитывающие состояние флага `ZF` - `REPE` и `REPNE`.
